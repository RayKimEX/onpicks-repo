<ng-template #loading>
  <onpicks-loading-icon></onpicks-loading-icon>
</ng-template>


<ng-container *ngIf="(pData$ | async) as data; else  loading">
  <div class="current-nav">
    <div class="row">
      <span *ngFor="let item of data?.category; index as i">
        <span class="current-nav__category subtitle-2-bold">{{item.name}}</span>
        <span *ngIf="data?.category.length - 1 !== (i)" class="current-nav__slash">/</span>
      </span>

      <hr>
    </div>
  </div>

  <div
    [ngClass]="[!isFB ? 'row' : '']"
    class="product-detail">
    <div
      [ngClass]="[!isFB ? 'col-7-of-12' : '']">
      <onpicks-p-thumbnail
        [imagesLargeList]="data?.thumbnails.slice()"
        [imagesSmallList]="data?.thumbnails.slice()">
      </onpicks-p-thumbnail>
      <div *ngIf="isFB">
        <onpicks-p-menu [isMobile]="isFB" [data]="data"></onpicks-p-menu>
      </div>
      <onpicks-value-list></onpicks-value-list>

      <onpicks-p-other-sellers></onpicks-p-other-sellers>
      <onpicks-p-picture-review-sub
        [pictureReviewList]="(pPictureReviews$ | async)?.results">
      </onpicks-p-picture-review-sub>
      <onpicks-p-item-detail></onpicks-p-item-detail>
      <onpicks-p-description [description]="data?.description"></onpicks-p-description>
      <!--async를 붙여서 넘기는 이유는 받을때 좀더 편
      하게 받게 하기 위함-->
      <onpicks-p-reviews #onpicksReview></onpicks-p-reviews>
      <onpicks-p-refund></onpicks-p-refund>
    </div>


    <router-outlet style="position:fixed"></router-outlet>

    <div [ngStyle]="{display : isFB ? 'none' :'block'}" class="col-5-of-12">
      <onpicks-p-menu [data]="data"></onpicks-p-menu>
    </div>
  </div>

  <!--<div class="product-detail-mobile">-->
    <!--<onpicks-p-thumbnail-->
      <!--[imagesLargeList]="data?.thumbnails.slice()"-->
      <!--[imagesSmallList]="data?.thumbnails.slice()">-->
    <!--</onpicks-p-thumbnail>-->
  <!--</div>-->

  <div class="row">
    <ui-mini-list [infoList]="weeklyBest$ | async" [setTitle]="'이 상품 구매자가 함께 본 상품'"></ui-mini-list>
  </div>

</ng-container>
