
<header class="header" (mouseleave)="outMenu()">
  <div class="header__progressive-bar">
    <div class="header__progressive-bar--inner"></div>
  </div>
  <div class="header__miscell u-default-site-padding">
    <div class="header__miscell--inner">
      <!--<emitter-change-preference class="header__miscell&#45;&#45;item">{{ region === '/kr' ? 'KOR' : 'USA' }}</emitter-change-preference>-->
      <emitter-change-preference [type]="'currency'" class="header__miscell--item">{{ currency === 'KRW' ? 'KRW ₩' : 'USD $' }}</emitter-change-preference>
      <emitter-change-preference [type]="'locale'" class="header__miscell--item">{{ locale === 'ko' ? '한글' : 'ENG' }}</emitter-change-preference>

      <div class="header__miscell--profile u-float-right" *ngIf="(auth$ | async) as auth;">
        <ng-container *ngIf=" auth.isAuthenticated === false">
          <span class="header__miscell--profile--login" ><a i18n="@@header__login" routerLink="/member/login" >로그인/login</a></span>
          <span class="header__miscell--profile--slash">&nbsp;|&nbsp;</span>
          <span class="header__miscell--profile--signup"><a i18n="@@header__signup" routerLink="/member/signup">회원가입|signup</a></span>
        </ng-container>

        <ng-container *ngIf=" auth.isAuthenticated === true">
          <span class="header__miscell--profile--image">
            <a routerLink="/account">
              <img src="{{auth?.user?.avatar === ''? 'http://img.onpicks.com/assets/default_avatar.png' : auth.user.avatar}}"  alt="">
            </a>
          </span>

          <!--<span><button (click)="logout()">로그아웃</button></span>-->
        </ng-container>
        <span class="header__miscell--shopping-bag">
          <a href="" routerLink="/order/cart">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path d="M19.85,9a2.18,2.18,0,0,0-.19-.48A2.83,2.83,0,0,0,17.14,7H17A5,5,0,1,0,7,7H6.86A2.83,2.83,0,0,0,4.34,8.52,2.18,2.18,0,0,0,4.15,9,2.83,2.83,0,0,0,4,9.86v9.28a2.9,2.9,0,0,0,.34,1.34A2.83,2.83,0,0,0,6.86,22H17.14a2.83,2.83,0,0,0,2.52-1.52A2.9,2.9,0,0,0,20,19.14V9.86A2.83,2.83,0,0,0,19.85,9ZM9.24,5.83a3,3,0,0,1,1.63-1.61A2.92,2.92,0,0,1,12,4a3,3,0,0,1,3,3H9A3,3,0,0,1,9.24,5.83ZM18,10v9.14a.86.86,0,0,1-.86.86H6.86A.86.86,0,0,1,6,19.14V9.86A.86.86,0,0,1,6.86,9H17.14a.86.86,0,0,1,.86.86Z" fill="#161616"/>
            </svg>
          </a>
        </span>

      </div>
    </div>

  </div>
  <div class="header__main-nav u-default-site-padding">
    <div class="header__main-nav--outer">
      <a class="header__main-nav--logo" href="" routerLink="/shops">
        <svg width="108.23" height="30" viewBox="0 0 108.23 30">
          <path d="M56.63,0a2.57,2.57,0,1,1-2.57,2.6A2.57,2.57,0,0,1,56.63,0Z"/>
          <path d="M45.18,6.73a5.92,5.92,0,0,0-4.94,2.18V7.07H35.8V30h4.45V22A5.78,5.78,0,0,0,45,24c4.66,0,7.79-3.69,7.79-8.7S50,6.73,45.18,6.73ZM44.37,20a4.08,4.08,0,0,1-4.07-3.79,6.48,6.48,0,0,1,0-1.76,4.06,4.06,0,0,1,4.07-3.76c2.29,0,4.1,1.72,4.1,4.64S46.66,20,44.37,20Z"/>
          <path d="M8.66,6.68A8.46,8.46,0,0,0,0,15.45a8.48,8.48,0,0,0,8.66,8.76,8.48,8.48,0,0,0,8.67-8.76A8.47,8.47,0,0,0,8.66,6.68Zm0,13.55a4.53,4.53,0,0,1-4.22-4.78,4.53,4.53,0,0,1,4.22-4.79,4.53,4.53,0,0,1,4.23,4.79A4.53,4.53,0,0,1,8.66,20.23Z"/>
          <rect x="48.29" y="13.11" width="16.69" height="4.51" transform="translate(41.2 71.97) rotate(-89.93)"/>
          <path d="M77.26,17.32v0h-4.1a3.81,3.81,0,0,1-3.83,2.81,4.1,4.1,0,0,1-4-2.82,5.87,5.87,0,0,1-.3-1.9c0-3,1.94-4.68,4.24-4.68A3.66,3.66,0,0,1,73,13.51h4.16s0-.07,0-.11A6.55,6.55,0,0,0,77,12.16h0v0a6.76,6.76,0,0,0-2.71-4,7.8,7.8,0,0,0-3-1.35,8.65,8.65,0,0,0-2-.23h-.13a8.55,8.55,0,0,0-8.66,8.85,8.63,8.63,0,0,0,8.77,8.86h.09c3.81,0,7-2.38,7.7-5.55l0-.07h0A6.14,6.14,0,0,0,77.26,17.32Z"/>
          <path d="M108.22,18.47A4.61,4.61,0,0,0,107,15.56l-.31-.3a7.15,7.15,0,0,0-3.39-1.59l-2.38-.52a2.36,2.36,0,0,1-1-.39,1.3,1.3,0,0,1-.44-.55,1.38,1.38,0,0,1-.11-.55c0-.95,1-1.66,2.14-1.66a2.55,2.55,0,0,1,2.74,2.21h3.83a5.8,5.8,0,0,0-.09-1,5.08,5.08,0,0,0-.52-1.52c-.81-1.54-2.59-3.09-6-3.1h-.15c-3.52.06-6.1,2.51-6.1,5.45v.17a4.62,4.62,0,0,0,.9,2.66,5.42,5.42,0,0,0,2.33,1.71,8.71,8.71,0,0,0,1.44.45l2.21.51a3.51,3.51,0,0,1,1,.33,1.62,1.62,0,0,1,.66.6,1.34,1.34,0,0,1,.19.7c0,.88-.72,1.66-2.21,1.66a2.77,2.77,0,0,1-3-2.36H94.76a4.87,4.87,0,0,0,0,.66h0a5.67,5.67,0,0,0,2.77,4.13,7,7,0,0,0,3.68,1h.5c4.37,0,6.48-2.77,6.48-5.48C108.23,18.69,108.23,18.58,108.22,18.47Z"/>
          <path d="M87.93,14.32l7.63,9.26H89.87l-6.38-7.82v7.82H79L79,0h4.49l0,13.37,6.06-6.5h5.38Z"/><path d="M28,6.72A5.52,5.52,0,0,0,23.33,9V7.13H18.89V23.7h4.44v0h0v-9.5c0-1.92,1.14-3.43,3.09-3.43,2.15,0,3.05,1.45,3.05,3.29v9.64H34V13.27C34,9.64,32.09,6.72,28,6.72Z"/>
        </svg>
      </a>
      <nav class="header__main-nav--router">
        <ul>
          <li>
            <a
               class="h1-bold u-color-grey"
               #shops
               (mouseenter)="hoverMenu()"
               routerLink="/shops"
               [ngClass]="{ 'u-color-black' : ((url$ | async)[1] !== 'showcases') && ((url$ | async)[1] !== 'events')  && ((url$ | async)[1] !== 'reviews')}"
               i18n="@@header__shops">
               쇼핑|shops
            </a>
          </li>
          <li>
            <a
               class="h1-bold u-color-grey"

               (click)="showPreparingMessage()"
               i18n="@@header__showcases">
               쇼케이스|showcases
            </a>
            <!--routerLink="showcases"-->
            <!--[routerLinkActive]="['u-color-black', 'u-active']"-->
          </li>
          <li>
            <a
               class="h1-bold u-color-grey"

               (click)="showPreparingMessage()"
               i18n="@@header__events">
               이벤트|events
            </a>
            <!--routerLink="events"-->
            <!--[routerLinkActive]="['u-color-black', 'u-active']"-->
          </li>
          <li>
            <a
               class="h1-bold u-color-grey"

               (click)="showPreparingMessage()"
               i18n="@@header__reviews">
               리뷰|reviews
            </a>
            <!--routerLink="reviews"-->
            <!--[routerLinkActive]="['u-color-black', 'u-active']"-->
          </li>
        </ul>
      </nav>
    </div>
    <onpicks-search-box
      (enter)="search($event)"
      [width]="46.4"
      [top]="-1"
      i18n-placeholder="@@header__placeholder"
      placeholder="2018 추석선물 대전">
    </onpicks-search-box>
  </div>
  <onpicks-free-delivery-notibox
    #deliveryBox
    [setCartInfo]="cart$ | async"
    [ngStyle]="{ opacity : '0'}"
  ></onpicks-free-delivery-notibox>

  <div #menu class="header-menu__outer">
    <nav>
      <ul class="header-menu__item" *ngFor="let item of menuMap[locale]?.main">
        <li>
          <a [routerLink]="'/shops/c/' + item.href">
          <div
            class="header-menu__item--title"
            [ngClass] =
            "[
              (item.slug === 'pantry-and-household')  ? 'header-menu__item--title-pantry-and-household' : '',
              (item.slug === 'beauty')  ? 'header-menu__item--title-beauty' : '',
              (item.slug === 'baby')  ? 'header-menu__item--title-baby' : '',
              (item.slug === 'health')  ? 'header-menu__item--title-health' : ''
            ]"
          >
              <!--(item.slug === locationMap['hong'])  ? 'header-menu__item&#45;&#45;title-electronics' : '',-->
              <!--(item.slug === locationMap['hong'])  ? 'header-menu__item&#45;&#45;title-baby' : '',-->
              <!--(item.slug === locationMap['hong'])  ? 'header-menu__item&#45;&#45;title-health' : '',-->
              <span>{{item.name}}</span>
            </div>
          </a>
        </li>
        <li class="header-menu__item--category"
            *ngFor="let subItem of item.sub">
          <a [routerLink]="'/shops/c/' + subItem.href">{{subItem.name}}</a>
        </li>
        <li class="header-menu__item--category">
          <a [routerLink]="'/shops/c/' + item.href">{{item.name}} 더보기 ></a>
        </li>
      </ul>
    </nav>
    <div class="header-menu__recommend">
      <ul class="header-menu__recommend--ul">
        <li class="header-menu__recommend--ul-item" i18n="@@header-menu__recommend-category"> </li>
        <li class="header-menu__recommend--ul-item" *ngFor="let item of menuMap[locale]?.recommandCategory"><a [routerLink]="'/shops/c/' + item.href">{{item.name}}</a></li>
      </ul>
    </div>
  </div>
  <div #alertMessage class="header__alert">
    <span  class="header__alert--message subtitle-2-regular u-color-green">언녕하세요</span>
    <span class></span>
  </div>

</header>

